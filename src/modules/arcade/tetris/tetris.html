<template>
    <div class="main" tabindex="0">
        <view-toast></view-toast>
        
        <div class="game">
            <h2>LWC-TRIS</h2>
            <div class="screen view">
                <view-div-canvas canvas={canvas} scale="20" background="black" border="1px solid #000066">
                    <div if:true={paused} class="overlay" slot="overlay">
                        <h1>[enter]<br>to play</h1>
                        <table>
                            <thead>
                                <tr>
                                    <td><b>Key</b></td><td><b>Action</b></td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>[m]</td><td>unmute / mute audio</td></tr>
                                <tr><td>[▲]</td><td>rotate</td></tr>
                                <tr><td>[◄][►]</td><td>move</td></tr>
                                <tr><td>[▼]</td><td>soft drop</td></tr>
                                <tr><td>[space]</td><td>hard drop</td></tr>
                                <tr><td>[enter]</td><td>pause | resume</td></tr>
                                <tr><td>[r]</td><td>reset</td></tr>
                            </tbody>
                        </table>
                    </div>
                </view-div-canvas>
            </div>
        </div>
        <div class="stats">
            <h3>Room: {room}</h3>
            <h3>Player: <br>
                {player}</h3>
            <br>
            <h2>Next</h2>
            <div class="next view">
                <view-div-canvas canvas={nextView} scale="20" background="black" border="1px solid #000066"></view-div-canvas>
            </div>
            
            <h3>Lines: {state.lines}</h3>
            <h3>Level: {state.level}</h3>
            <h3>Score: {state.score}</h3>
        </div>
        <div class="competitors">
            <div for:each={competitors} for:item="competitor" key={competitor.name} class="competitor">
                {competitor.name}
                <br>
                Level: {competitor.state.level}
                <br>
                Score: {competitor.state.score}
                <br>
                <div class="view">
                    <view-div-canvas canvas={competitor.canvas} scale="8" background="#303030"></view-div-canvas>
                </div>
            </div>
        </div>
    </div>
</template>
